<!DOCTYPE html><html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>실시간 주식 거래 시뮬레이터 - 롱/숏 포함</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      display: flex;
      font-family: Arial, sans-serif;
      margin: 0;
      height: 100vh;
    }
    .sidebar {
      width: 200px;
      background: #f5f5f5;
      padding: 10px;
      overflow-y: auto;
      box-sizing: border-box;
    }
    .chart-container {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
      box-sizing: border-box;
    }
    .stock-list button {
      display: block;
      width: 100%;
      margin-bottom: 5px;
    }
    .controls {
      margin-top: 10px;
    }
    .info {
      margin-top: 10px;
    }
    .log-table, .log-table th, .log-table td {
      border: 1px solid #ccc;
      border-collapse: collapse;
    }
    .log-table th, .log-table td {
      padding: 5px;
    }
    .rankings {
      margin-top: 20px;
      font-size: 14px;
    }
    .max-buy {
      margin-top: 5px;
      font-size: 14px;
      color: #333;
    }
    @media (max-height: 700px), (max-width: 480px) {
      body {
        flex-direction: column;
        height: 100vh;
      }
      .sidebar {
        width: 100%;
        height: 130px;
        overflow-x: auto;
        overflow-y: hidden;
        white-space: nowrap;
        padding: 5px 10px;
        display: flex;
        flex-wrap: nowrap;
        align-items: center;
        box-sizing: border-box;
      }
      .stock-list button {
        display: inline-block;
        width: auto;
        margin-right: 8px;
        margin-bottom: 0;
        white-space: normal;
        flex-shrink: 0;
      }
      .chart-container {
        height: calc(100vh - 130px);
        overflow-y: auto;
        padding: 10px;
      }
    }
  </style>
</head>
<body>
  <div class="sidebar">
    <h2 style="flex-shrink: 0; margin-right: 15px;">종목 선택</h2>
    <div class="stock-list" id="stockButtons"></div>
    <div class="rankings">
      <h3>🏆 수익률 순위</h3>
      <ul id="rankList"></ul>
    </div>
    <div style="margin-top:20px;">
      <label for="userNameInput">사용자 이름:</label><br />
      <input type="text" id="userNameInput" placeholder="이름 입력" />
      <button id="setNameBtn">설정</button>
    </div>
  </div>  <div class="chart-container">
    <h1 id="stock-title">초기투자</h1>
    <div style="font-size: 18px; margin-bottom: 15px;">
      현재 주가: <span id="currentPrice" style="font-weight: bold;">0</span>원
    </div><div class="controls">
  <input type="number" id="tradeAmount" value="1" min="1" />
  <button onclick="buyStock()">🟢 매수</button>
  <button onclick="sellStock()">🔴 매도</button>
  <button onclick="longStock()">📈 롱 매수</button>
  <button onclick="closeLong()">📉 롱 정산</button>
  <button onclick="shortStock()">📉 숏 매도</button>
  <button onclick="closeShort()">📈 숏 정산</button>

  <div class="max-buy" id="maxBuy"></div>
  <div class="info">
    💰 자금: <span id="cash">-</span>원 |
    💼 보유 수량: <span id="shares">-</span>개<br />
    📈 손익: <span id="profit" style="font-weight: bold;">-</span>
  </div>
</div>

<canvas id="stockChart" width="1200" height="400"></canvas>

<h3>📋 거래 내역</h3>
<table class="log-table" id="tradeLog">
  <thead>
    <tr>
      <th>시간</th>
      <th>종목</th>
      <th>구분</th>
      <th>단가</th>
      <th>수량</th>
      <th>총액</th>
      <th>손익</th>
      <th>수익률</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

  </div>  <script>
    // ✅ 여기에서부터 종목 정의 및 차트 데이터 포함
    const initialCash = 100000;
    const stocks = ['삼성전자', '카카오', '네이버', '현대차', 'LG에너지솔루션'];
    const startPrices = {
      '삼성전자': 70000,
      '카카오': 55000,
      '네이버': 200000,
      '현대차': 180000,
      'LG에너지솔루션': 400000
    };
    let stockData = {};
    let chart;
    let currentStock = stocks[0];

    // ✅ 차트 초기화 함수 및 종목 버튼 생성 등 원래 코드 포함해야 함
    // 예시: createStockButtons(), initChart(), updateChart(), generateInitialData()
  </script></body>
</html>
